if("function"!=typeof Blob&&"object"!=typeof Blob||"undefined"==typeof URL)if("function"!=typeof Blob&&"object"!=typeof Blob||"undefined"==typeof webkitURL)var Blob=function(e){"use strict";var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder||function(e){var n=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},t=function(){this.data=[]},o=function(e,n,t){this.data=e,this.size=e.length,this.type=n,this.encoding=t},r=t.prototype,a=o.prototype,i=e.FileReaderSync,c=function(e){this.code=this[this.name=e]},s="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),l=s.length,d=e.URL||e.webkitURL||e,u=d.createObjectURL,p=d.revokeObjectURL,f=d,w=e.btoa,h=e.atob,y=e.ArrayBuffer,g=e.Uint8Array;for(o.fake=a.fake=!0;l--;)c.prototype[s[l]]=l+1;return d.createObjectURL||(f=e.URL={}),f.createObjectURL=function(e){var n,t=e.type;return null===t&&(t="application/octet-stream"),e instanceof o?(n="data:"+t,"base64"===e.encoding?n+";base64,"+e.data:"URI"===e.encoding?n+","+decodeURIComponent(e.data):w?n+";base64,"+w(e.data):n+","+encodeURIComponent(e.data)):u?u.call(d,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(d,e)},r.append=function(e){var t=this.data;if(g&&(e instanceof y||e instanceof g)){for(var r="",a=new g(e),s=0,l=a.length;l>s;s++)r+=String.fromCharCode(a[s]);t.push(r)}else if("Blob"===n(e)||"File"===n(e)){if(!i)throw new c("NOT_READABLE_ERR");var d=new i;t.push(d.readAsBinaryString(e))}else e instanceof o?"base64"===e.encoding&&h?t.push(h(e.data)):"URI"===e.encoding?t.push(decodeURIComponent(e.data)):"raw"===e.encoding&&t.push(e.data):("string"!=typeof e&&(e+=""),t.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new o(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},a.slice=function(e,n,t){var r=arguments.length;return 3>r&&(t=null),new o(this.data.slice(e,r>1?n:this.data.length),t,this.encoding)},a.toString=function(){return"[object Blob]"},t}(e);return function(e,t){var o=t?t.type||"":"",r=new n;if(e)for(var a=0,i=e.length;i>a;a++)r.append(e[a]);return r.getBlob(o)}}(self);else self.URL=webkitURL;var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";var n=e.document,t=function(){return e.URL||e.webkitURL||e},o=e.URL||e.webkitURL||e,r=n.createElementNS("http://www.w3.org/1999/xhtml","a"),a=!e.externalHost&&"download"in r,i=e.webkitRequestFileSystem,c=e.requestFileSystem||i||e.mozRequestFileSystem,s=function(n){(e.setImmediate||e.setTimeout)(function(){throw n},0)},l="application/octet-stream",d=0,u=[],p=function(){for(var e=u.length;e--;){var n=u[e];"string"==typeof n?o.revokeObjectURL(n):n.remove()}u.length=0},f=function(e,n,t){n=[].concat(n);for(var o=n.length;o--;){var r=e["on"+n[o]];if("function"==typeof r)try{r.call(e,t||e)}catch(a){s(a)}}},w=function(o,s){var p,w,h,y=this,g=o.type,v=!1,m=function(){var e=t().createObjectURL(o);return u.push(e),e},b=function(){f(y,"writestart progress write writeend".split(" "))},$=function(){(v||!p)&&(p=m(o)),w?w.location.href=p:window.open(p,"_blank"),y.readyState=y.DONE,b()},_=function(e){return function(){return y.readyState!==y.DONE?e.apply(this,arguments):void 0}},R={create:!0,exclusive:!1};if(y.readyState=y.INIT,s||(s="download"),a){p=m(o),n=e.document,r=n.createElementNS("http://www.w3.org/1999/xhtml","a"),r.href=p,r.download=s;var k=n.createEvent("MouseEvents");return k.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(k),y.readyState=y.DONE,b(),void 0}return e.chrome&&g&&g!==l&&(h=o.slice||o.webkitSlice,o=h.call(o,0,o.size,l),v=!0),i&&"download"!==s&&(s+=".download"),(g===l||i)&&(w=e),c?(d+=o.size,c(e.TEMPORARY,d,_(function(e){e.root.getDirectory("saved",R,_(function(e){var n=function(){e.getFile(s,R,_(function(e){e.createWriter(_(function(n){n.onwriteend=function(n){w.location.href=e.toURL(),u.push(e),y.readyState=y.DONE,f(y,"writeend",n)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&$()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=y["on"+e]}),n.write(o),y.abort=function(){n.abort(),y.readyState=y.DONE},y.readyState=y.WRITING}),$)}),$)};e.getFile(s,{create:!1},_(function(e){e.remove(),n()}),_(function(e){e.code===e.NOT_FOUND_ERR?n():$()}))}),$)}),$),void 0):($(),void 0)},h=w.prototype,y=function(e,n){return new w(e,n)};return h.abort=function(){var e=this;e.readyState=e.DONE,f(e,"abort")},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,e.addEventListener("unload",p,!1),y}(this.self||this.window||this.content);"undefined"!=typeof module&&(module.exports=saveAs),$(function(){function e(){var e=new Date;return{getDiff:function(){var n=new Date;return n.getTime()-e}}}function n(e,n){for(var t="",o=0;o<e.length;o++)t+=e.charAt(o),(o+1)%n==0&&o>0&&(t+="\n");return t}function t(){if(null!=_){var e=_.getDiff();$("#coloring").html("syntax: "+e+"ms,");var n=b+e;$("#totaltime").html("total: "+n+"ms")}}function o(e,n,t){t||(t=102400);var o,r,a,i,c=e.length.toString(16).replace(/./g,"0"),s=20,l=[],d=0;for(l.push("Binary file of type: "+n+"\n"),l.push("\n");d<e.length;){if(t>=0&&d>=t){l.push("\n"),l.push("too much data, stopping now\n");break}for(o=e.slice(d,d+s),r=(c+d.toString(16)).slice(-c.length)+":",d+=o.length,a=0;s>a;)for(r+=" ",i=0;4>i;++i,++a)r+=a<o.length?("00"+o[a].toString(16)).slice(-2)+" ":"   ";r+="| ",r+=String.fromCharCode.apply(String,o).replace(/[\0-\x1F\x7F-\x9F\xAD]/g,"."),r+="\n",l.push(r)}return l.join("")}function r(e){var n=$("#new_syntax");if(n.val()!==e&&(n.val(e),n.val()!==e)){0==$("#new_syntax .header.unknown").length&&n.append($('<option disabled="disabled" class="header unknown">- Unknown format -</option>'));var t=$("<option>");t.prop("value",e).text(e),t.html("&nbsp;&nbsp;"+t.html()),n.append(t),t.prop("selected",!0)}}function a(){$("#decrypting").hide();var n=v.key||window.location.hash.substring(1),t=v.data,a=v.cipher;if(""==t)return $("#askpassword").show(),$("#typepassword").focus(),!1;if($("#askpassword").hide(),""==n)return $("#insertkey").show(),$("#typekey").focus(),!1;$("#insertkey").hide(),$("#decrypting").show();var i=new e;window.ezcrypt.async_decrypt([n,t,a],function(n,t){if(n){b=i.getDiff(),$("#execute").html("decryption: "+b+"ms,");var a;if($("#wrapholder").show(),$("#content_container").show(),$("#decrypting").hide(),_=new e,"string"==typeof n||n instanceof String){try{var a=new Blob([n],{type:s})}catch(c){g.log("saveAs not working:"),g.log(c)}m.setOption("mode",v.syntax),m.setValue(n),$("#showhex").hide(),$("#clone").show(),$("#clone").length&&r(v.syntax)}else{try{var a=new Blob([new Uint8Array(n)],{type:s})}catch(c){g.log("saveAs not working:"),g.log(c)}var s=v.syntax,l=!1;try{if(a&&s.match(/^image\//)){var d=$("<img>");$("#alternate_content").append(d),l=!0;var u=new FileReader;u.onload=function(){d[0].src=u.result},u.readAsDataURL(a)}}catch(c){g.log("special binary handling failed:"),g.log(c)}m.setOption("mode","text/plain"),m.setValue(o(n,s)),$("#clone").hide(),$("#showhex").toggle(l),$("#content_container").toggle(!l)}var p=v.highlight_options||{};for(var f in p)p.hasOwnProperty(f)&&m.setOption(f,p[f]);a?$("#saveas").show().bind("click",function(){saveAs(a)}):$("#saveas").hide()}else t&&($("#decrypting").hide(),alert(t))})}function i(e){var n="",t=window.location.href,o=window.location.hash,r=t.indexOf(o)||t.length,i=t.substr(0,r);e||(n="p="+window.ezcrypt_backend.sha($("#typepassword").val())),$("#decrypting").show(),$.ajax({url:i,type:"POST",dataType:"json",data:n,cache:!1,success:function(e){v.data=e.data,v.syntax=e.syntax,v.cipher=e.cipher,a()},error:function(){e?a():alert("bad password!")}})}function c(e){k||!U?s(e):O?e&&R.push(e):e.apply(this,U)}function s(t){if(U=!1,null!=k&&(clearTimeout(k),k=null),O)return O=2,t&&R.push(t),void 0;var o=$("#new_key").val(),r=$("#new_text").val(),a=$("#new_cipher").val();if($("#new_result").html(""),$("#new_encrypttime").html(""),""==o||""==r)return"";var i=new e;window.ezcrypt.async_encrypt([o,r,a],function(e,t,o){if(!o){if(2==O)return O=0,s(),void 0;O=0}e&&(e=n(e,96),$("#new_encrypttime").html("encryption: "+i.getDiff()+"ms"),$("#new_result").val(e));var r,a,c=o?R.slice():R.splice(0);for(U=[e,t,o],r=0,a=c.length;a>r;++r)c[r].call(this,U)})}function l(){null!=k&&(clearTimeout(k),k=null),k=setTimeout(function(){k=null,s()},500)}function d(){var e=$("#new_key").val(),n=$("#new_cipher").val(),t=$("#new_ttl").val(),o=$("#upload_file")[0].files[0],r=o.type||"application/octet-stream",a="";$("#new_usepassword").is(":checked")&&(a=window.ezcrypt_backend.sha($("#new_typepassword").val()));var i=new FileReader;i.onload=function(){var o=new Uint8Array(i.result);window.ezcrypt.async_encrypt([e,o,n,{binary:!0}],function(o){o&&$.ajax({url:document.baseURI,type:"POST",dataType:"json",data:"data="+encodeURIComponent(o)+"&p="+a+"&ttl="+encodeURIComponent(t)+"&syn="+encodeURIComponent(r)+"&cipher="+encodeURIComponent(n),cache:!1,success:function(n){if(-100==t);else{var o="";""!=a&&(o="?p="+a),window.location=document.baseURI+"p/"+n.id+o+"#"+e}},error:function(){enableHover(),alert("error submitting form")}})})},i.readAsArrayBuffer(o)}function u(){if(""==$("#new_text").val())return!1;var e=$("#new_key").val(),n=$("#new_cipher").val(),t=$("#new_ttl").val(),o=$("#new_syntax").val(),r="";$("#new_usepassword").is(":checked")&&(r=window.ezcrypt_backend.sha($("#new_typepassword").val())),c(function(a){a&&$.ajax({url:document.baseURI,type:"POST",dataType:"json",data:"data="+encodeURIComponent(a)+"&p="+r+"&ttl="+encodeURIComponent(t)+"&syn="+encodeURIComponent(o)+"&cipher="+encodeURIComponent(n),cache:!1,success:function(n){if(-100==t);else{var o="";""!=r&&(o="?p="+r),window.location=document.baseURI+"p/"+n.id+o+"#"+e}},error:function(){enableHover(),alert("error submitting form")}})})}var p,f,w,h,y=!1,g="undefined"==typeof window.console?{}:window.console;"undefined"==typeof g.log&&(g.log=function(){});var v={data:"",cipher:"",syntax:"",key:!1,highlight_options:{}};"undefined"!=typeof Worker&&"undefined"==typeof window.ezcrypt_worker?(p=new Worker(window.ezcrypt_crypto_backend_url),f={},w=0,p.onmessage=function(e){var n=e.data;if(n.id){var t=f[n.id];t&&(n.hasOwnProperty("progress")||delete f[n.id],t(n.result,n.error,n.progress))}},window.ezcrypt_backend.randomKey(function(e){p.postMessage({id:0,func:"_add_entropy",arguments:[e,128,"ezcrypt backend random"]})}),h=function(e,n,t){if(!y){var o;window.sjcl&&window.sjcl.random?(o=window.sjcl.random.randomWords(16,0),p.postMessage({id:0,func:"_add_entropy",arguments:[o,32,"sjcl.random"]})):(o=4294967296*Math.random()^0,p.postMessage({id:0,func:"_add_entropy",arguments:[o,1,"Math.random"]}))}var r=++w;f[r]=t,p.postMessage({id:r,func:e,arguments:n})}):h=function(e,n,t){try{t({result:window.ezcrypt[e].apply(this,n)})}catch(o){t({error:o})}};var m,b=0,_=null,R=[],k=null,O=0,U=!1;window.ezcrypt={sha:window.ezcrypt_backend.sha,encrypt:window.ezcrypt_backend.encrypt,decrypt:window.ezcrypt_backend.decrypt,async_encrypt:h.bind(this,"encrypt"),async_decrypt:h.bind(this,"decrypt")},document.getElementById("content")&&(m=CodeMirror.fromTextArea(document.getElementById("content"),{lineNumbers:!0,matchBrackets:!1,lineWrapping:!1,readOnly:!0,onChange:t})),$("#new_key").length&&($("#upload").hide(),$("#upload").bind("click",function(e){return $("#upload_file").click(),e.preventDefault(),!1}),window.ezcrypt_backend.randomKey(function(e){$("#new_key").val(e);var n=$("#en");n.bind("click",u),$("#upload_file").bind("change",d),n.removeAttr("disabled"),n.val("Submit"),"undefined"!=typeof FileReader&&$("#upload").show();var t=$("#new_text");""!=t.val()&&l(),t.bind("textchange",l),t.live("keydown",function(e){13==e.keyCode&&e.ctrlKey&&n.click()}),n.hover(function(){$("#new_result").show(),$("#new_encrypttime").show()},function(){$("#new_result").hide(),$("#new_encrypttime").hide()})})),$("#new_usepassword").change(function(){this.checked?$("#new_typepassword").show():$("#new_typepassword").hide()}),$("#clone").length?($("#content_container").hide(),$("#submitpassword").bind("click",function(){i(!1)}),$("#submitkey").bind("click",function(){v.key=$("#typekey").val(),a()}),$("#typepassword,#typekey").live("keydown",function(e){13==e.keyCode&&$(this).parent().find("input[type=button]").click()}),$("#new").bind("click",function(){$("#new_text").html(""),$("#new_result").val(""),$("#newpaste").slideDown()}),$("#clone").bind("click",function(){r(v.syntax),$("#new_text").html(m.getValue()).trigger("textchange"),$("#newpaste").slideDown()}),$("#tool-wrap").bind("click",function(){var e=$("#tool-wrap").is(":checked");$(".tool-wrap").toggleClass("tool-wrap-on",e),m.setOption("lineWrapping",e)}),$("#tool-numbers").bind("click",function(){var e=$("#tool-numbers").is(":checked");$(".tool-numbers").toggleClass("tool-numbers-on",e),m.setOption("lineNumbers",e)}),$("#tool-fullscreen").bind("click",function(){var e=$("#tool-fullscreen").is(":checked");$(".tool-fullscreen").toggleClass("tool-fullscreen-on",e),$("#holder").css("width",e?"100%":"")}),$("#showhex").bind("click",function(){$("#content_container").toggle()}),window.ezcrypt_paste?(v=window.ezcrypt_paste,a()):i(!0)):window.ezcrypt_paste&&(v=window.ezcrypt_paste,a())});
//# sourceMappingURL=main-13ec5bbb998669879e235c01da78ad32be2c7ba9.min.map