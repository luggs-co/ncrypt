if("function"!=typeof Blob&&"object"!=typeof Blob||"undefined"==typeof URL)if("function"!=typeof Blob&&"object"!=typeof Blob||"undefined"==typeof webkitURL)var Blob=function(e){"use strict";var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},o=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},r=n.prototype,a=o.prototype,i=e.FileReaderSync,c=function(e){this.code=this[this.name=e]},s="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),d=s.length,l=e.URL||e.webkitURL||e,u=l.createObjectURL,p=l.revokeObjectURL,f=l,w=e.btoa,y=e.atob,h=e.ArrayBuffer,v=e.Uint8Array;for(o.fake=a.fake=!0;d--;)c.prototype[s[d]]=d+1;return l.createObjectURL||(f=e.URL={}),f.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof o?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):w?t+";base64,"+w(e.data):t+","+encodeURIComponent(e.data)):u?u.call(l,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(l,e)},r.append=function(e){var n=this.data;if(v&&(e instanceof h||e instanceof v)){for(var r="",a=new v(e),s=0,d=a.length;d>s;s++)r+=String.fromCharCode(a[s]);n.push(r)}else if("Blob"===t(e)||"File"===t(e)){if(!i)throw new c("NOT_READABLE_ERR");var l=new i;n.push(l.readAsBinaryString(e))}else e instanceof o?"base64"===e.encoding&&y?n.push(y(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new o(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},a.slice=function(e,t,n){var r=arguments.length;return 3>r&&(n=null),new o(this.data.slice(e,r>1?t:this.data.length),n,this.encoding)},a.toString=function(){return"[object Blob]"},n}(e);return function(e,n){var o=n?n.type||"":"",r=new t;if(e)for(var a=0,i=e.length;i>a;a++)r.append(e[a]);return r.getBlob(o)}}(self);else self.URL=webkitURL;var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=e.URL||e.webkitURL||e,r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),a=!e.externalHost&&"download"in r,i=e.webkitRequestFileSystem,c=e.requestFileSystem||i||e.mozRequestFileSystem,s=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},d="application/octet-stream",l=0,u=[],p=function(){for(var e=u.length;e--;){var t=u[e];"string"==typeof t?o.revokeObjectURL(t):t.remove()}u.length=0},f=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(a){s(a)}}},w=function(o,s){var p,w,y,h=this,v=o.type,g=!1,m=function(){var e=n().createObjectURL(o);return u.push(e),e},b=function(){f(h,"writestart progress write writeend".split(" "))},$=function(){(g||!p)&&(p=m(o)),w?w.location.href=p:window.open(p,"_blank"),h.readyState=h.DONE,b()},_=function(e){return function(){return h.readyState!==h.DONE?e.apply(this,arguments):void 0}},R={create:!0,exclusive:!1};if(h.readyState=h.INIT,s||(s="download"),a){p=m(o),t=e.document,r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r.href=p,r.download=s;var k=t.createEvent("MouseEvents");return k.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(k),h.readyState=h.DONE,b(),void 0}return e.chrome&&v&&v!==d&&(y=o.slice||o.webkitSlice,o=y.call(o,0,o.size,d),g=!0),i&&"download"!==s&&(s+=".download"),(v===d||i)&&(w=e),c?(l+=o.size,c(e.TEMPORARY,l,_(function(e){e.root.getDirectory("saved",R,_(function(e){var t=function(){e.getFile(s,R,_(function(e){e.createWriter(_(function(t){t.onwriteend=function(t){w.location.href=e.toURL(),u.push(e),h.readyState=h.DONE,f(h,"writeend",t)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&$()},"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=h["on"+e]}),t.write(o),h.abort=function(){t.abort(),h.readyState=h.DONE},h.readyState=h.WRITING}),$)}),$)};e.getFile(s,{create:!1},_(function(e){e.remove(),t()}),_(function(e){e.code===e.NOT_FOUND_ERR?t():$()}))}),$)}),$),void 0):($(),void 0)},y=w.prototype,h=function(e,t){return new w(e,t)};return y.abort=function(){var e=this;e.readyState=e.DONE,f(e,"abort")},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,e.addEventListener("unload",p,!1),h}(this.self||this.window||this.content);"undefined"!=typeof module&&(module.exports=saveAs),$(function(){function e(){var e=new Date;return{getDiff:function(){var t=new Date;return t.getTime()-e}}}function t(e,t){for(var n="",o=0;o<e.length;o++)n+=e.charAt(o),(o+1)%t==0&&o>0&&(n+="\n");return n}function n(){if(null!=m){var e=m.getDiff();$("#coloring").html("syntax: "+e+"ms,");var t=g+e;$("#totaltime").html("total: "+t+"ms")}}function o(){$("#decrypting").hide();var t=h.key||window.location.hash.substring(1),n=h.data,o=h.cipher;if(""==n)return $("#askpassword").show(),$("#typepassword").focus(),!1;if($("#askpassword").hide(),""==t)return $("#insertkey").show(),$("#typekey").focus(),!1;$("#insertkey").hide(),$("#decrypting").show();var r=new e;window.ezcrypt.async_decrypt([t,n,o],function(t,n){if(t){g=r.getDiff(),$("#execute").html("decryption: "+g+"ms,");var o;if($("#wrapholder").show(),$("#content_container").show(),$("#decrypting").hide(),m=new e,"string"==typeof t||t instanceof String){try{var o=new Blob([t],{type:i})}catch(a){y.log("saveAs not working:"),y.log(a)}v.setOption("mode",h.syntax),v.setValue(t),$("#showhex").hide()}else{try{var o=new Blob([new Uint8Array(t)],{type:i})}catch(a){y.log("saveAs not working:"),y.log(a)}var i=h.syntax,c=!1;try{if(o&&i.match(/^image\//)){var s=$("<img>");$("#alternate_content").append(s),c=!0;var d=new FileReader;d.onload=function(){s[0].src=d.result},d.readAsDataURL(o)}}catch(a){y.log("special binary handling failed:"),y.log(a)}$("#showhex").toggle(c),$("#content_container").toggle(!c)}o?$("#saveas").show().bind("click",function(){saveAs(o)}):$("#saveas").hide()}else n&&($("#decrypting").hide(),alert(n))})}function r(e){var t="",n=window.location.href,r=window.location.hash,a=n.indexOf(r)||n.length,i=n.substr(0,a);e||(t="p="+window.ezcrypt_backend.sha($("#typepassword").val())),$("#decrypting").show(),$.ajax({url:i,type:"POST",dataType:"json",data:t,cache:!1,success:function(e){h.data=e.data,h.syntax=e.syntax,h.cipher=e.cipher,o()},error:function(){e?o():alert("bad password!")}})}function a(e){_||!k?i(e):R?e&&b.push(e):e.apply(this,k)}function i(n){if(k=!1,null!=_&&(clearTimeout(_),_=null),R)return R=2,n&&b.push(n),void 0;var o=$("#new_key").val(),r=$("#new_text").val(),a=$("#new_cipher").val();if($("#new_result").html(""),$("#new_encrypttime").html(""),""==o||""==r)return"";var c=new e;window.ezcrypt.async_encrypt([o,r,a],function(e,n,o){if(!o){if(2==R)return R=0,i(),void 0;R=0}e&&(e=t(e,96),$("#new_encrypttime").html("encryption: "+c.getDiff()+"ms"),$("#new_result").val(e));var r,a,s=o?b.slice():b.splice(0);for(k=[e,n,o],r=0,a=s.length;a>r;++r)s[r].call(this,k)})}function c(){null!=_&&(clearTimeout(_),_=null),_=setTimeout(function(){_=null,i()},500)}function s(){var e=$("#new_key").val(),t=$("#new_cipher").val(),n=$("#new_ttl").val(),o=$("#upload_file")[0].files[0],r=o.type||"application/octet-stream",a="";$("#new_usepassword").is(":checked")&&(a=window.ezcrypt_backend.sha($("#new_typepassword").val()));var i=new FileReader;i.onload=function(){var o=new Uint8Array(i.result);window.ezcrypt.async_encrypt([e,o,t,{binary:!0}],function(o){o&&$.ajax({url:document.baseURI,type:"POST",dataType:"json",data:"data="+encodeURIComponent(o)+"&p="+a+"&ttl="+encodeURIComponent(n)+"&syn="+encodeURIComponent(r)+"&cipher="+encodeURIComponent(t),cache:!1,success:function(t){if(-100==n);else{var o="";""!=a&&(o="?p="+a),window.location=document.baseURI+"p/"+t.id+o+"#"+e}},error:function(){enableHover(),alert("error submitting form")}})})},i.readAsArrayBuffer(o)}function d(){if(""==$("#new_text").val())return!1;var e=$("#new_key").val(),t=$("#new_cipher").val(),n=$("#new_ttl").val(),o=$("#new_syntax").val(),r="";$("#new_usepassword").is(":checked")&&(r=window.ezcrypt_backend.sha($("#new_typepassword").val())),a(function(a){a&&$.ajax({url:document.baseURI,type:"POST",dataType:"json",data:"data="+encodeURIComponent(a)+"&p="+r+"&ttl="+encodeURIComponent(n)+"&syn="+encodeURIComponent(o)+"&cipher="+encodeURIComponent(t),cache:!1,success:function(t){if(-100==n);else{var o="";""!=r&&(o="?p="+r),window.location=document.baseURI+"p/"+t.id+o+"#"+e}},error:function(){enableHover(),alert("error submitting form")}})})}var l,u,p,f,w=!1,y="undefined"==typeof window.console?{}:window.console;"undefined"==typeof y.log&&(y.log=function(){});var h={data:"",cipher:"",syntax:"",key:!1};"undefined"!=typeof Worker&&"undefined"==typeof window.ezcrypt_worker?(l=new Worker(window.ezcrypt_crypto_backend_url),u={},p=0,l.onmessage=function(e){var t=e.data;if(t.id){var n=u[t.id];n&&(t.hasOwnProperty("progress")||delete u[t.id],n(t.result,t.error,t.progress))}},window.ezcrypt_backend.randomKey(function(e){l.postMessage({id:0,func:"_add_entropy",arguments:[e,128,"ezcrypt backend random"]})}),f=function(e,t,n){if(!w){var o;window.sjcl&&window.sjcl.random?(o=window.sjcl.random.randomWords(16,0),l.postMessage({id:0,func:"_add_entropy",arguments:[o,32,"sjcl.random"]})):(o=4294967296*Math.random()^0,l.postMessage({id:0,func:"_add_entropy",arguments:[o,1,"Math.random"]}))}var r=++p;u[r]=n,l.postMessage({id:r,func:e,arguments:t})}):f=function(e,t,n){try{n({result:window.ezcrypt[e].apply(this,t)})}catch(o){n({error:o})}};var v,g=0,m=null,b=[],_=null,R=0,k=!1;window.ezcrypt={sha:window.ezcrypt_backend.sha,encrypt:window.ezcrypt_backend.encrypt,decrypt:window.ezcrypt_backend.decrypt,async_encrypt:f.bind(this,"encrypt"),async_decrypt:f.bind(this,"decrypt")},document.getElementById("content")&&(window.ezcrypt.editor=v=CodeMirror.fromTextArea(document.getElementById("content"),{lineNumbers:!0,matchBrackets:!1,lineWrapping:!1,readOnly:!0,onChange:n})),$("#new_key").length&&($("#upload").hide(),$("#upload").bind("click",function(e){return $("#upload_file").click(),e.preventDefault(),!1}),window.ezcrypt_backend.randomKey(function(e){$("#new_key").val(e);var t=$("#en");t.bind("click",d),$("#upload_file").bind("change",s),t.removeAttr("disabled"),t.val("Submit"),"undefined"!=typeof FileReader&&$("#upload").show();var n=$("#new_text");""!=n.val()&&c(),n.bind("textchange",c),n.live("keydown",function(e){13==e.keyCode&&e.ctrlKey&&t.click()}),t.hover(function(){$("#new_result").show(),$("#new_encrypttime").show()},function(){$("#new_result").hide(),$("#new_encrypttime").hide()})})),$("#new_usepassword").change(function(){this.checked?$("#new_typepassword").show():$("#new_typepassword").hide()}),$("#askpassword").length&&($("#content_container").hide(),$("#submitpassword").bind("click",function(){r(!1)}),$("#submitkey").bind("click",function(){h.key=$("#typekey").val(),o()}),$("#typepassword,#typekey").live("keydown",function(e){13==e.keyCode&&$(this).parent().find("input[type=button]").click()}),$("#new").bind("click",function(){$("#new_text").html(""),$("#new_result").val(""),$("#newpaste").slideDown()}),$("#clone").bind("click",function(){$("#new_text").html(v.getValue()).trigger("textchange"),$("#newpaste").slideDown()}),$("#tool-wrap").bind("click",function(){var e=$("#tool-wrap").is(":checked");$(".tool-wrap").toggleClass("tool-wrap-on",e),v.setOption("lineWrapping",e)}),$("#tool-numbers").bind("click",function(){var e=$("#tool-numbers").is(":checked");$(".tool-numbers").toggleClass("tool-numbers-on",e),v.setOption("lineNumbers",e)}),$("#tool-fullscreen").bind("click",function(){var e=$("#tool-fullscreen").is(":checked");$(".tool-fullscreen").toggleClass("tool-fullscreen-on",e),$("#holder").css("width",e?"100%":"")}),$("#showhex").bind("click",function(){$("#content_container").toggle()}),window.ezcrypt_paste?(h=window.ezcrypt_paste,o()):r(!0))});
//# sourceMappingURL=main-b73d60062cfe4aac20346174f9e1f2c516b54916.min.map