if("function"!=typeof Blob&&"object"!=typeof Blob||"undefined"==typeof URL)if("function"!=typeof Blob&&"object"!=typeof Blob||"undefined"==typeof webkitURL)var Blob=function(e){"use strict";var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder||function(e){var n=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},t=function(){this.data=[]},o=function(e,n,t){this.data=e,this.size=e.length,this.type=n,this.encoding=t},r=t.prototype,a=o.prototype,i=e.FileReaderSync,c=function(e){this.code=this[this.name=e]},s="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),l=s.length,d=e.URL||e.webkitURL||e,u=d.createObjectURL,p=d.revokeObjectURL,f=d,w=e.btoa,y=e.atob,h=e.ArrayBuffer,v=e.Uint8Array;for(o.fake=a.fake=!0;l--;)c.prototype[s[l]]=l+1;return d.createObjectURL||(f=e.URL={}),f.createObjectURL=function(e){var n,t=e.type;return null===t&&(t="application/octet-stream"),e instanceof o?(n="data:"+t,"base64"===e.encoding?n+";base64,"+e.data:"URI"===e.encoding?n+","+decodeURIComponent(e.data):w?n+";base64,"+w(e.data):n+","+encodeURIComponent(e.data)):u?u.call(d,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(d,e)},r.append=function(e){var t=this.data;if(v&&(e instanceof h||e instanceof v)){for(var r="",a=new v(e),s=0,l=a.length;l>s;s++)r+=String.fromCharCode(a[s]);t.push(r)}else if("Blob"===n(e)||"File"===n(e)){if(!i)throw new c("NOT_READABLE_ERR");var d=new i;t.push(d.readAsBinaryString(e))}else e instanceof o?"base64"===e.encoding&&y?t.push(y(e.data)):"URI"===e.encoding?t.push(decodeURIComponent(e.data)):"raw"===e.encoding&&t.push(e.data):("string"!=typeof e&&(e+=""),t.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new o(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},a.slice=function(e,n,t){var r=arguments.length;return 3>r&&(t=null),new o(this.data.slice(e,r>1?n:this.data.length),t,this.encoding)},a.toString=function(){return"[object Blob]"},t}(e);return function(e,t){var o=t?t.type||"":"",r=new n;if(e)for(var a=0,i=e.length;i>a;a++)r.append(e[a]);return r.getBlob(o)}}(self);else self.URL=webkitURL;var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";var n=e.document,t=function(){return e.URL||e.webkitURL||e},o=e.URL||e.webkitURL||e,r=n.createElementNS("http://www.w3.org/1999/xhtml","a"),a=!e.externalHost&&"download"in r,i=e.webkitRequestFileSystem,c=e.requestFileSystem||i||e.mozRequestFileSystem,s=function(n){(e.setImmediate||e.setTimeout)(function(){throw n},0)},l="application/octet-stream",d=0,u=[],p=function(){for(var e=u.length;e--;){var n=u[e];"string"==typeof n?o.revokeObjectURL(n):n.remove()}u.length=0},f=function(e,n,t){n=[].concat(n);for(var o=n.length;o--;){var r=e["on"+n[o]];if("function"==typeof r)try{r.call(e,t||e)}catch(a){s(a)}}},w=function(o,s){var p,w,y,h=this,v=o.type,g=!1,m=function(){var e=t().createObjectURL(o);return u.push(e),e},b=function(){f(h,"writestart progress write writeend".split(" "))},$=function(){(g||!p)&&(p=m(o)),w?w.location.href=p:window.open(p,"_blank"),h.readyState=h.DONE,b()},_=function(e){return function(){return h.readyState!==h.DONE?e.apply(this,arguments):void 0}},R={create:!0,exclusive:!1};if(h.readyState=h.INIT,s||(s="download"),a){p=m(o),n=e.document,r=n.createElementNS("http://www.w3.org/1999/xhtml","a"),r.href=p,r.download=s;var k=n.createEvent("MouseEvents");return k.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(k),h.readyState=h.DONE,b(),void 0}return e.chrome&&v&&v!==l&&(y=o.slice||o.webkitSlice,o=y.call(o,0,o.size,l),g=!0),i&&"download"!==s&&(s+=".download"),(v===l||i)&&(w=e),c?(d+=o.size,c(e.TEMPORARY,d,_(function(e){e.root.getDirectory("saved",R,_(function(e){var n=function(){e.getFile(s,R,_(function(e){e.createWriter(_(function(n){n.onwriteend=function(n){w.location.href=e.toURL(),u.push(e),h.readyState=h.DONE,f(h,"writeend",n)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&$()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=h["on"+e]}),n.write(o),h.abort=function(){n.abort(),h.readyState=h.DONE},h.readyState=h.WRITING}),$)}),$)};e.getFile(s,{create:!1},_(function(e){e.remove(),n()}),_(function(e){e.code===e.NOT_FOUND_ERR?n():$()}))}),$)}),$),void 0):($(),void 0)},y=w.prototype,h=function(e,n){return new w(e,n)};return y.abort=function(){var e=this;e.readyState=e.DONE,f(e,"abort")},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,e.addEventListener("unload",p,!1),h}(this.self||this.window||this.content);"undefined"!=typeof module&&(module.exports=saveAs),$(function(){function e(){var e=new Date;return{getDiff:function(){var n=new Date;return n.getTime()-e}}}function n(e,n){for(var t="",o=0;o<e.length;o++)t+=e.charAt(o),(o+1)%n==0&&o>0&&(t+="\n");return t}function t(){if(null!=g){var e=g.getDiff();$("#coloring").html("syntax: "+e+"ms,");var n=v+e;$("#totaltime").html("total: "+n+"ms")}}function o(){$("#content_container").hide(),$("#decrypting").hide();var n=window.location.hash.substring(1),t=$("#data").val(),o=$("#cipher").val();if(""==t)return $("#askpassword").show(),$("#typepassword").focus(),!1;if($("#askpassword").hide(),""==n)return $("#insertkey").show(),$("#typekey").focus(),!1;$("#insertkey").hide(),$("#decrypting").show();var r=new e;window.ezcrypt.async_decrypt([n,t,o],function(n,t){if(n){v=r.getDiff(),$("#execute").html("decryption: "+v+"ms,");var o;if($("#wrapholder").show(),$("#content_container").show(),$("#decrypting").hide(),g=new e,"string"==typeof n||n instanceof String){try{var o=new Blob([n],{type:i})}catch(a){y.log("saveAs not working:"),y.log(a)}h.setOption("mode",$("#syntax").val()),h.setValue(n),$("#showhex").hide()}else{try{var o=new Blob([new Uint8Array(n)],{type:i})}catch(a){y.log("saveAs not working:"),y.log(a)}var i=$("#syntax").val(),c=!1;try{if(o&&i.match(/^image\//)){var s=$("<img>");$("#alternate_content").append(s),c=!0;var l=new FileReader;l.onload=function(){s[0].src=l.result},l.readAsDataURL(o)}}catch(a){y.log("special binary handling failed:"),y.log(a)}$("#showhex").toggle(c),$("#content_container").toggle(!c)}o?$("#saveas").show().bind("click",function(){saveAs(o)}):$("#saveas").hide()}else t&&($("#decrypting").hide(),alert(t))})}function r(){var e=window.ezcrypt_backend.sha($("#typepassword").val()),n=window.location.href,t=window.location.hash,r=n.indexOf(t)||n.length,a=n.substr(0,r);$.ajax({url:a,type:"POST",dataType:"json",data:"p="+e,cache:!1,success:function(e){$("#data").val(e.data),$("#syntax").val(e.syntax),$("#cipher").val(e.cipher),o()},error:function(){alert("bad password!")}})}function a(e){b||!R?i(e):_?e&&m.push(e):e.apply(this,R)}function i(t){if(R=!1,null!=b&&(clearTimeout(b),b=null),_)return _=2,t&&m.push(t),void 0;var o=$("#new_key").val(),r=$("#new_text").val(),a=$("#new_cipher").val();if($("#new_result").html(""),$("#new_encrypttime").html(""),""==o||""==r)return"";var c=new e;window.ezcrypt.async_encrypt([o,r,a],function(e,t,o){if(!o){if(2==_)return _=0,i(),void 0;_=0}e&&(e=n(e,96),$("#new_encrypttime").html("encryption: "+c.getDiff()+"ms"),$("#new_result").val(e));var r,a,s=o?m.slice():m.splice(0);for(R=[e,t,o],r=0,a=s.length;a>r;++r)s[r].call(this,R)})}function c(){null!=b&&(clearTimeout(b),b=null),b=setTimeout(function(){b=null,i()},500)}function s(){var e=$("#new_key").val(),n=$("#new_cipher").val(),t=$("#new_ttl").val(),o=$("#upload_file")[0].files[0],r=o.type||"application/octet-stream",a="";$("#new_usepassword").is(":checked")&&(a=window.ezcrypt_backend.sha($("#new_typepassword").val()));var i=new FileReader;i.onload=function(){var o=new Uint8Array(i.result);window.ezcrypt.async_encrypt([e,o,n,{binary:!0}],function(o){o&&$.ajax({url:document.baseURI,type:"POST",dataType:"json",data:"data="+encodeURIComponent(o)+"&p="+a+"&ttl="+encodeURIComponent(t)+"&syn="+encodeURIComponent(r)+"&cipher="+encodeURIComponent(n),cache:!1,success:function(n){if(-100==t);else{var o="";""!=a&&(o="?p="+a),window.location=document.baseURI+"p/"+n.id+o+"#"+e}},error:function(){enableHover(),alert("error submitting form")}})})},i.readAsArrayBuffer(o)}function l(){if(""==$("#new_text").val())return!1;var e=$("#new_key").val(),n=$("#new_cipher").val(),t=$("#new_ttl").val(),o=$("#new_syntax").val(),r="";$("#new_usepassword").is(":checked")&&(r=window.ezcrypt_backend.sha($("#new_typepassword").val())),a(function(a){a&&$.ajax({url:document.baseURI,type:"POST",dataType:"json",data:"data="+encodeURIComponent(a)+"&p="+r+"&ttl="+encodeURIComponent(t)+"&syn="+encodeURIComponent(o)+"&cipher="+encodeURIComponent(n),cache:!1,success:function(n){if(-100==t);else{var o="";""!=r&&(o="?p="+r),window.location=document.baseURI+"p/"+n.id+o+"#"+e}},error:function(){enableHover(),alert("error submitting form")}})})}var d,u,p,f,w=!1,y="undefined"==typeof window.console?{}:window.console;"undefined"==typeof y.log&&(y.log=function(){}),"undefined"!=typeof Worker&&"undefined"==typeof window.ezcrypt_worker?(d=new Worker(window.ezcrypt_crypto_backend_url),u={},p=0,d.onmessage=function(e){var n=e.data;if(n.id){var t=u[n.id];t&&(n.hasOwnProperty("progress")||delete u[n.id],t(n.result,n.error,n.progress))}},window.ezcrypt_backend.randomKey(function(e){d.postMessage({id:0,func:"_add_entropy",arguments:[e,128,"ezcrypt backend random"]})}),f=function(e,n,t){if(!w){var o;window.sjcl&&window.sjcl.random?(o=window.sjcl.random.randomWords(16,0),d.postMessage({id:0,func:"_add_entropy",arguments:[o,32,"sjcl.random"]})):(o=4294967296*Math.random()^0,d.postMessage({id:0,func:"_add_entropy",arguments:[o,1,"Math.random"]}))}var r=++p;u[r]=t,d.postMessage({id:r,func:e,arguments:n})}):f=function(e,n,t){try{t({result:window.ezcrypt[e].apply(this,n)})}catch(o){t({error:o})}};var h,v=0,g=null,m=[],b=null,_=0,R=!1;window.ezcrypt={sha:window.ezcrypt_backend.sha,encrypt:window.ezcrypt_backend.encrypt,decrypt:window.ezcrypt_backend.decrypt,async_encrypt:f.bind(this,"encrypt"),async_decrypt:f.bind(this,"decrypt")},document.getElementById("content")&&(window.ezcrypt.editor=h=CodeMirror.fromTextArea(document.getElementById("content"),{lineNumbers:!0,matchBrackets:!1,lineWrapping:!1,readOnly:!0,onChange:t}),h.setOption("mode",$("#syntax").val()),h.focus()),$("#new_key").length&&($("#upload").hide(),$("#upload").bind("click",function(e){return $("#upload_file").click(),e.preventDefault(),!1}),window.ezcrypt_backend.randomKey(function(e){$("#new_key").val(e);var n=$("#en");n.bind("click",l),$("#upload_file").bind("change",s),n.removeAttr("disabled"),n.val("Submit"),"undefined"!=typeof FileReader&&$("#upload").show();var t=$("#new_text");""!=t.val()&&c(),t.bind("textchange",c),t.live("keydown",function(e){13==e.keyCode&&e.ctrlKey&&n.click()}),n.hover(function(){$("#new_result").show(),$("#new_encrypttime").show()},function(){$("#new_result").hide(),$("#new_encrypttime").hide()})})),$("#new_usepassword").change(function(){this.checked?$("#new_typepassword").show():$("#new_typepassword").hide()}),$("#askpassword").length&&($("#submitpassword").bind("click",r),$("#submitkey").bind("click",function(){window.location=window.location+"#"+$("#typekey").val(),o()}),$("#typepassword,#typekey").live("keydown",function(e){13==e.keyCode&&$(this).parent().find("input[type=button]").click()}),$("#new").bind("click",function(){$("#new_text").html(""),$("#new_result").val(""),$("#newpaste").slideDown()}),$("#clone").bind("click",function(){$("#new_text").html(h.getValue()).trigger("textchange"),$("#newpaste").slideDown()}),$("#tool-wrap").bind("click",function(){var e=$("#tool-wrap").is(":checked");$(".tool-wrap").toggleClass("tool-wrap-on",e),h.setOption("lineWrapping",e)}),$("#tool-numbers").bind("click",function(){var e=$("#tool-numbers").is(":checked");$(".tool-numbers").toggleClass("tool-numbers-on",e),h.setOption("lineNumbers",e)}),$("#tool-fullscreen").bind("click",function(){var e=$("#tool-fullscreen").is(":checked");$(".tool-fullscreen").toggleClass("tool-fullscreen-on",e),$("#holder").css("width",e?"100%":"")}),$("#showhex").bind("click",function(){$("#content_container").toggle()}),o())});
//# sourceMappingURL=main-ad522ac51ac6939b61d7a73ac5eb8bbd51c4efda.min.map